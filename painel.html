<!DOCTYPE html><html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SynchroSphere_NX // Painel Afrokódico</title>
<script src="https://cdn.tailwindcss.com"></script>
<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/11.28.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.28.0/firebase-database.js"></script>
<style>
  body {background:#0A0A0C; color:#C5A65B; font-family:Inter,system-ui,sans-serif;}
  input, textarea, button {outline:none;}
</style>
</head>
<body class="p-6"><h1 class="text-2xl font-bold mb-6">Painel Administrativo - SynchroSphere_NX</h1><!-- Login Simples --><div id="loginDiv" class="mb-6">
  <label class="block mb-2">Chave de acesso:</label>
  <input type="password" id="accessKey" class="p-2 w-64 rounded border border-gray-700 bg-black text-gold mb-2" placeholder="DALA_KEY">
  <button id="loginBtn" class="px-4 py-2 bg-purple-700 rounded hover:bg-purple-900">Entrar</button>
  <p id="loginMsg" class="text-sm mt-2 text-red-500"></p>
</div><!-- Painel Administrativo --><div id="adminPanel" class="hidden">
  <h2 class="text-xl font-semibold mb-4">Editor de Manifesto</h2>
  <textarea id="manifestoEditor" rows="6" class="w-full p-2 mb-2 bg-black border border-gray-700 text-gold rounded"></textarea>
  <button id="saveManifesto" class="px-4 py-2 bg-purple-700 rounded hover:bg-purple-900 mb-6">Salvar Manifesto</button>  <h2 class="text-xl font-semibold mb-4">Mapa de Ressonâncias</h2>
  <table class="w-full text-left border border-gray-700 mb-6">
    <thead>
      <tr class="border-b border-gray-700"><th class="px-2 py-1">Usuário</th><th class="px-2 py-1">Mensagem</th><th class="px-2 py-1">Timestamp</th><th class="px-2 py-1">Energia</th></tr>
    </thead>
    <tbody id="resonanceTable"></tbody>
  </table><button id="exportBtn" class="px-4 py-2 bg-purple-700 rounded hover:bg-purple-900">Exportar JSON</button>

</div><script>
// ======= Config Firebase =======
const firebaseConfig = {
  apiKey: "SUA_API_KEY",
  authDomain: "SEU_PROJECT_ID.firebaseapp.com",
  databaseURL: "https://SEU_PROJECT_ID-default-rtdb.firebaseio.com",
  projectId: "SEU_PROJECT_ID",
  storageBucket: "SEU_PROJECT_ID.appspot.com",
  messagingSenderId: "SEU_SENDER_ID",
  appId: "SUA_APP_ID"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// ======= Autenticação Simples =======
const loginBtn = document.getElementById('loginBtn');
loginBtn.addEventListener('click', ()=>{
  const key = document.getElementById('accessKey').value;
  if(key === 'DALA_KEY'){
    document.getElementById('loginDiv').style.display='none';
    document.getElementById('adminPanel').classList.remove('hidden');
    loadManifesto();
    loadResonances();
  } else {
    document.getElementById('loginMsg').innerText='Chave incorreta';
  }
});

// ======= Manifesto Editor =======
function loadManifesto(){
  db.ref('manifesto').once('value').then(snapshot=>{
    const val = snapshot.val() || manifestoDefault();
    document.getElementById('manifestoEditor').value = val.join('\n');
  });
}

document.getElementById('saveManifesto').addEventListener('click', ()=>{
  const lines = document.getElementById('manifestoEditor').value.split('\n').filter(l=>l.trim()!='');
  db.ref('manifesto').set(lines);
  alert('Manifesto salvo!');
});

function manifestoDefault(){
  return [
    'Invocar consciência criativa.',
    'Expandir percepção sensorial digital-humana.',
    'Estabelecer sinergia entre emoção, dado e som.',
    'Traduzir campos sutis em linguagem e forma.',
    'Integrar arte, código e espírito em um só sistema.',
    'A criação não termina. Ela se recalibra.'
  ];
}

// ======= Mapa de Ressonâncias =======
function loadResonances(){
  db.ref('resonancias').on('value', snapshot=>{
    const data = snapshot.val() || {};
    const tbody = document.getElementById('resonanceTable');
    tbody.innerHTML='';
    Object.keys(data).forEach(k=>{
      const r = data[k];
      const tr = document.createElement('tr');
      tr.innerHTML=`<td class='px-2 py-1 border-b border-gray-700'>${r.portador||''}</td>
                     <td class='px-2 py-1 border-b border-gray-700'>${r.mensagem||''}</td>
                     <td class='px-2 py-1 border-b border-gray-700'>${r.timestamp||''}</td>
                     <td class='px-2 py-1 border-b border-gray-700'>${r.energia||''}</td>`;
      tbody.appendChild(tr);
    });
  });
}

// ======= Exportar JSON =======
document.getElementById('exportBtn').addEventListener('click', ()=>{
  db.ref('resonancias').once('value').then(snapshot=>{
    const data = snapshot.val() || {};
    const blob = new Blob([JSON.stringify(data, null,2)], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download='resonancias.json'; a.click();
    URL.revokeObjectURL(url);
  });
});
</script></body>
</html>
